{"version":3,"sources":["webpack:///./src/components/Keno.js","webpack:///./src/pages/Apps/ChanceKeno.js"],"names":["chance","Chance","Keno","useState","kb","setKb","picked","setPicked","pickLimit","maxPricePerGame","qpNum","setQPNum","winningDraw","setWinningDraw","disabled","setDisabled","totalAmount","pricePer","numGames","boardOptions","setBoardOptions","useEffect","newKb","add","r","push","length","x","matches","matchCount","finGetWin","showWinningDraw","d","unique","natural","min","max","quikPik","e","preventDefault","num","handleChange","target","value","handlePricePerGame","val","trim","replace","formatCurrency","handleNumGamesChange","toString","substring","n","Number","isNaN","parseFloat","parts","split","renderNum","className","key","onSubmit","htmlFor","type","id","name","onChange","onBlur","placeholder","map","filter","indexOf","row","col","onClick","nPicked","slice","currentTarget","addPicked","EncodeDecode"],"mappings":"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","file":"component---src-pages-apps-chance-keno-js-8738bbed82bbcee02302.js","sourcesContent":["import React, { useState, useEffect } from 'react';\r\n\r\nimport { Chance } from 'chance';\r\nconst chance = new Chance();\r\n\r\n/*\r\nKeno cards have 8 rows of numbers with 10 numbers in each row.\r\nEach row starts from the value of the last row + 1\r\n*/\r\nexport default function Keno() {\r\n  const [kb, setKb] = useState([]);\r\n  const [picked, setPicked] = useState([]);\r\n  const [pickLimit] = useState(10);\r\n  const [maxPricePerGame] = useState(20);\r\n  const [qpNum, setQPNum] = useState();\r\n  const [winningDraw, setWinningDraw] = useState([]);\r\n  const [disabled, setDisabled] = useState(false);\r\n\r\n  const [boardOptions, setBoardOptions] = useState({\r\n    totalAmount: 0,\r\n    pricePer: 0,\r\n    numGames: 0\r\n  });\r\n\r\n  useEffect(() => {\r\n    let newKb = [];\r\n    let add = 1;\r\n    // init rows of Keno board\r\n    for (let r = 0; r < 8; r++) {\r\n      newKb.push([]);\r\n    }\r\n\r\n    // populate Keno board\r\n    for (let r = 0; r < newKb.length; r++) {\r\n      for (let x = 1; x <= 10; x++) {\r\n        newKb[r].push(add);\r\n        add++;\r\n      }\r\n    }\r\n\r\n    setKb(newKb);\r\n  }, []);\r\n\r\n  /**\r\n   * Finish the game.\r\n   * - disable the board\r\n   * - generate winning numbers\r\n   * - show winnint numbers\r\n   */\r\n  const finGetWin = () => {\r\n    setDisabled(true);\r\n    showWinningDraw();\r\n  };\r\n\r\n  /**\r\n   * Generate NPC games.\r\n   */\r\n  const genNPC = () => {\r\n    // generate dummy data for other players\r\n    let players = [];\r\n    const n = chance.integer({ min: 10, max: 20 });\r\n    for (let i = 0; i < n; i++) {\r\n      players.push([]);\r\n    }\r\n    for (let y = 0; y < players.length; y++) {\r\n      players[y].push(\r\n        chance.unique(chance.natural, pickLimit, { min: 1, max: 80 })\r\n      );\r\n    }\r\n    return players;\r\n  };\r\n\r\n  // eslint-disable-next-line no-unused-vars\r\n  const calcWinnings = () => {\r\n    const npcs = genNPC(); // eslint-disable-line\r\n    // calc flat winnings for each npc\r\n\r\n    // calc flat winnings for client\r\n\r\n    // calc actual winnings\r\n  };\r\n\r\n  /**\r\n   * GUI Utility.\r\n   * Generate and display the winning Keno spots.\r\n   */\r\n  const showWinningDraw = () => {\r\n    // generate a winning draw\r\n    const d = chance.unique(chance.natural, pickLimit, { min: 1, max: 80 });\r\n    // set the winning spots\r\n    setWinningDraw(d);\r\n  };\r\n\r\n  /**\r\n   * GUI Form Utility.\r\n   * QuikPik: auto select a draw of numbers of length `n`.\r\n   * @param {event} e - Click event.\r\n   */\r\n  const quikPik = e => {\r\n    e.preventDefault();\r\n    // determine to use default pickLimit or user defined qpNum.\r\n    let num = qpNum ? qpNum : pickLimit;\r\n    const d = chance.unique(chance.natural, num, { min: 1, max: 80 });\r\n    setPicked(d);\r\n    setDisabled(true);\r\n  };\r\n\r\n  /**\r\n   * GUI Form Utility.\r\n   * Process changes to QuikPik form.\r\n   * @param {event} e - Click event.\r\n   */\r\n  const handleChange = e => {\r\n    e.preventDefault();\r\n    if (e.target.value > pickLimit) setQPNum(pickLimit);\r\n    else setQPNum(e.target.value);\r\n  };\r\n\r\n  /**\r\n   * GUI Form Utility.\r\n   * Process clicked elements within the Keno game board.\r\n   * @param {event} e - Click event\r\n   * @param {number} val - The cell that was clicked within the Keno game board\r\n   */\r\n  const addPicked = (e, val) => {\r\n    e.preventDefault();\r\n    // guard check limit met\r\n    if (picked.length < pickLimit) {\r\n      let nPicked = picked.slice(0);\r\n\r\n      nPicked.push(val);\r\n      setPicked(nPicked);\r\n\r\n      // disable the clicked item\r\n      e.currentTarget.className += ' picked';\r\n\r\n      // check new length for should disable\r\n      if (nPicked.length === pickLimit) {\r\n        setDisabled(true); // submit required to generate other data\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * GUI Form Utility.\r\n   * Process changes to price per game input field.\r\n   * @param {event} e - Click event\r\n   */\r\n  const handlePricePerGame = e => {\r\n    e.preventDefault();\r\n    let val = e.target.value\r\n      .trim()\r\n      .replace(/[A-Za-z]/g, '')\r\n      .replace(/,/g, '');\r\n\r\n    if (val > maxPricePerGame) val = maxPricePerGame;\r\n\r\n    setBoardOptions({\r\n      ...boardOptions,\r\n      pricePer: val,\r\n      totalAmount: formatCurrency(boardOptions.numGames * val)\r\n    });\r\n  };\r\n\r\n  /**\r\n   * GUI Utility.\r\n   * Process changes to number of games input field.\r\n   * @param {event} e - Click event\r\n   */\r\n  const handleNumGamesChange = e => {\r\n    e.preventDefault();\r\n    let val = e.target.value;\r\n\r\n    setBoardOptions({\r\n      ...boardOptions,\r\n      numGames: val,\r\n      totalAmount: boardOptions.pricePer * val\r\n    });\r\n  };\r\n\r\n  /**\r\n   * GUI Utility.\r\n   * Format a string input to a NA currency format (0.00).\r\n   * @param {string|number} num - String input\r\n   */\r\n  const formatCurrency = num => {\r\n    if (!num) num = '';\r\n\r\n    if (typeof num === 'number') {\r\n      num = num.toString();\r\n    }\r\n\r\n    let value = num.trim().replace(/,/g, '');\r\n\r\n    while (value.substring(0, 2) === '00') {\r\n      value = value.substring(1);\r\n    }\r\n\r\n    if (value[0] === '.') {\r\n      value = '0' + value;\r\n    } else if (value.length) {\r\n      let n = Number(value);\r\n\r\n      if (isNaN(n)) {\r\n        value = parseFloat(value);\r\n\r\n        if (isNaN(value)) {\r\n          return '';\r\n        }\r\n      }\r\n\r\n      let parts = (value + '').split('.');\r\n      value = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\r\n\r\n      if (parts.length > 1) {\r\n        value += '.' + parts[1];\r\n      }\r\n    }\r\n\r\n    return value;\r\n  };\r\n\r\n  /**\r\n   * Render Helper.\r\n   * Display a number `n`.\r\n   * @param {number} n - The number (from and array iteration) to display\r\n   */\r\n  const renderNum = n => {\r\n    return (\r\n      <span className='numbers__your-num' key={n}>\r\n        {n + ' '}\r\n      </span>\r\n    );\r\n  };\r\n\r\n  /**\r\n   * Render Helper.\r\n   * Builds the HTML/JSX required to render the winning numbers.\r\n   */\r\n  const renderWinningDraw = () => {\r\n    return winningDraw.length > 0 ? (\r\n      <div className='numbers__your'>\r\n        <h3>Winning Numbers</h3>\r\n        {winningDraw.map(n => renderNum(n))}\r\n      </div>\r\n    ) : null;\r\n  };\r\n\r\n  /**\r\n   * Render helper.\r\n   * Builds the HTML/JSX required to render the options available for the Keno game.\r\n   * 'Fake' form.\r\n   */\r\n  const renderOptions = () => {\r\n    return (\r\n      <div className='options'>\r\n        <label htmlFor='options__price-per'>Price per Game:</label>\r\n        <input\r\n          type='text'\r\n          id='options__price-per'\r\n          name='options__price-per'\r\n          onChange={handlePricePerGame}\r\n          onBlur={handlePricePerGame}\r\n          placeholder={1}\r\n          value={formatCurrency(boardOptions.pricePer)}\r\n        />\r\n        <label htmlFor='options__num-games'>Number of Games:</label>\r\n        <input\r\n          type='number'\r\n          id='options__num-games'\r\n          name='options__num-games'\r\n          min={1}\r\n          max={100}\r\n          onChange={handleNumGamesChange}\r\n          onBlur={handleNumGamesChange}\r\n          placeholder={1}\r\n          value={boardOptions.numGames}\r\n        />\r\n        <p>Total Price: ${boardOptions.totalAmount}</p>\r\n        <button\r\n          disabled={picked.length === 0 || boardOptions.totalAmount === 0}\r\n          className='submit__card'\r\n          onClick={finGetWin}\r\n        >\r\n          Submit\r\n        </button>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  /**\r\n   * Render helper.\r\n   * Builds the HTML/JSX required to render the Keno board.\r\n   * Additional check made here to 'x' the cell for when QuikPik is used.\r\n   */\r\n  const renderBoard = () => {\r\n    return (\r\n      <>\r\n        <div className={`board ${disabled ? 'disabled' : ''}`}>\r\n          <div className='board__card'>\r\n            {kb.map(row => (\r\n              <div className='row' key={row}>\r\n                {row.map(col =>\r\n                  picked.indexOf(col) !== -1\r\n                    ? (<div className='col picked' key={col} />)\r\n                    : (\r\n                      <div\r\n                        className='col'\r\n                        key={col}\r\n                        onClick={e => addPicked(e, col)}\r\n                        value={col}\r\n                      >\r\n                        {renderNum(col)}\r\n                      </div>\r\n                    )\r\n                )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n  };\r\n\r\n  /**\r\n   * Render helper.\r\n   * Conditionally builds the HTML/JSX required to render the QuikPik form.\r\n   * If the end user has not selected any Keno spots manually, this form will display.\r\n   *\r\n   * Allows user to pick a number less than or equal to the `pickLimit` which will be\r\n   * the number of Keno spots to generate using our selected RNG\r\n   */\r\n  const showQuikPik = () => {\r\n    return (\r\n      <>\r\n        {picked.length === 0 ? (\r\n          <form className='quik-pik' onSubmit={quikPik}>\r\n            <label htmlFor='quik-pik-limit'>How many numbers?</label>\r\n            <input\r\n              type='number'\r\n              id='quik-pik-limit'\r\n              name='quik-pik-limit'\r\n              min={1}\r\n              max={pickLimit}\r\n              onChange={handleChange}\r\n              onBlur={handleChange}\r\n              placeholder={pickLimit}\r\n              value={qpNum}\r\n            />\r\n            <input className='submit__quick-pick' type='submit' value='Quik Pik' />\r\n          </form>\r\n        ) : null}\r\n      </>\r\n    );\r\n  };\r\n\r\n  /**\r\n   * Render helper.\r\n   * Builds the HTML/JSX required to render the end users selected Keno spots.\r\n   */\r\n  const renderYourNumbers = () => {\r\n    return (\r\n      <div className='numbers__your'>\r\n        <h3>\r\n          Your Numbers: {picked.length}/{pickLimit}\r\n        </h3>\r\n        {picked.map(n => renderNum(n))}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  /**\r\n   * Render helper.\r\n   * Builds the HTML/JSX required to render the end users Keno spots that match the winning Keno spots.\r\n   */\r\n  const renderMatchingWins = () => {\r\n    const matches = picked.filter(n => winningDraw.indexOf(n) > 0);\r\n    const matchCount = matches.length;\r\n    return (\r\n      <>\r\n        {winningDraw.length > 0 ? (\r\n          <div className='numbers__matching'>\r\n            <h3>Matches: {matchCount}</h3>\r\n            {matches.map(n => renderNum(n))}\r\n          </div>\r\n        ) : null}\r\n      </>\r\n    );\r\n  };\r\n\r\n  /**\r\n   * Render helper.\r\n   * Builds the HTML/JSX required to render the statistics section of the application.\r\n   * The following are built:\r\n   * - end users Keno spots\r\n   * - the winning Keno spots\r\n   * - the Keno spots the end user guessed that exist within the winning Keno spots\r\n   */\r\n  const renderNumbers = () => {\r\n    return (\r\n      <div className='numbers'>\r\n        {renderYourNumbers()}\r\n\r\n        {renderWinningDraw()}\r\n\r\n        {renderMatchingWins()}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <h1>Chance Keno</h1>\r\n      <p>\r\n        Pick up to {pickLimit} Keno spots by clicking on the number in the Keno\r\n        card or choose Quik Pik (defaults to {pickLimit} numbers).\r\n      </p>\r\n      {/* <p>\r\n        This is not a real Keno so we will generate some games in the\r\n        background. There will be anywhere from 10 to 20 other players who may\r\n        or may not have bought more than one card.\r\n      </p> */}\r\n      <div className='keno'>\r\n        <div>\r\n          {showQuikPik()}\r\n          {renderNumbers()}\r\n        </div>\r\n        {renderBoard()}\r\n\r\n        {renderOptions()}\r\n      </div>\r\n    </>\r\n  );\r\n}","import React from 'react';\r\nimport Keno from '../../components/Keno';\r\n\r\nexport default function EncodeDecode() {\r\n  return (\r\n    <div className='ChanceKeno'>\r\n      <Keno />\r\n    </div>\r\n  );\r\n}"],"sourceRoot":""}